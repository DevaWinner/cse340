<div class="checkout-container">
	<h1><%= title %></h1>
	<%- messages() %> <% if (cartItems.length > 0) { %>
	<div class="checkout-summary">
		<table class="cart-table">
			<thead>
				<tr>
					<th>Vehicle</th>
					<th>Quantity</th>
					<th>Price</th>
					<th>Total</th>
					<th>Action</th>
				</tr>
			</thead>
			<tbody>
				<% cartItems.forEach(item => { const unitPrice = new
				Intl.NumberFormat("en-US", { style: "currency", currency: "USD",
				minimumFractionDigits: 0, maximumFractionDigits: 2,
				}).format(item.inv_price); const lineTotal = new
				Intl.NumberFormat("en-US", { style: "currency", currency: "USD",
				minimumFractionDigits: 0, maximumFractionDigits: 2,
				}).format(item.inv_price * item.quantity); %>
				<tr>
					<td><%= item.inv_make %> <%= item.inv_model %></td>
					<td><%= item.quantity %></td>
					<td><%= unitPrice %></td>
					<td><%= lineTotal %></td>
					<td>
						<form action="/cart/remove" method="POST">
							<input type="hidden" name="cart_id" value="<%= item.cart_id %>" />
							<button type="submit" class="form-button remove-button">
								Remove
							</button>
						</form>
					</td>
				</tr>
				<% }); %>
			</tbody>
		</table>
		<div class="checkout-total">
			<p>Total: <strong><%= total %></strong></p>
		</div>
	</div>
	<% } else { %>
	<p>Your cart is empty.</p>
	<% } %>
	<form
		id="checkoutForm"
		action="/cart/checkout"
		method="POST"
		class="checkout-form"
		novalidate
	>
		<div class="form-group">
			<label for="shipping_address">Shipping Address:</label>
			<input
				type="text"
				id="shipping_address"
				name="shipping_address"
				value="<%= typeof shipping_address !== 'undefined' ? shipping_address : '' %>"
				required
			/>
		</div>
		<div class="form-group">
			<label for="shipping_city">City:</label>
			<input
				type="text"
				id="shipping_city"
				name="shipping_city"
				value="<%= typeof shipping_city !== 'undefined' ? shipping_city : '' %>"
				required
			/>
		</div>
		<div class="form-group">
			<label for="shipping_state">State:</label>
			<input
				type="text"
				id="shipping_state"
				name="shipping_state"
				value="<%= typeof shipping_state !== 'undefined' ? shipping_state : '' %>"
				maxlength="2"
				required
			/>
		</div>
		<div class="form-group">
			<label for="shipping_zip">Zip Code:</label>
			<input
				type="text"
				id="shipping_zip"
				name="shipping_zip"
				value="<%= typeof shipping_zip !== 'undefined' ? shipping_zip : '' %>"
				required
			/>
		</div>
		<div class="form-group">
			<label for="shipping_phone">Phone Number:</label>
			<input
				type="text"
				id="shipping_phone"
				name="shipping_phone"
				value="<%= typeof shipping_phone !== 'undefined' ? shipping_phone : '' %>"
				required
			/>
		</div>
		<button type="submit" class="form-button">Place Order</button>
	</form>
</div>
<script src="/js/checkout.js"></script>
